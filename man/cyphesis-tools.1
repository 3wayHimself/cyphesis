.\\" auto-generated by docbook2man-spec $Revision: 1.2 $
.TH "CYPHESIS-TOOLS" "1" "17 April 2014" "" "cyphesis"
.SH NAME
cyconfig, cyconvertrules, cydumprules, cyloadrules, cypasswd, cypython, cydb \- cyphesis tools
.SH SYNOPSIS
.sp
\fB/usr/bin/cyaddrules\fR [ \fB--section:option=value\fR\fI...\fR ]  [ \fBrulesetname atlas-xml-file\fR ] 
.sp
\fB/usr/bin/cyconfig\fR [ \fB--section:option=value\fR\fI...\fR ] 
.sp
\fB/usr/bin/cyconvertrules\fR \fBrule_file\fR
.sp
\fB/usr/bin/cydumprules\fR
.sp
\fB/usr/bin/cyloadrules\fR [ \fB--section:option=value\fR\fI...\fR ]  [ \fBrulesetname atlas-xml-file\fR ] 
.sp
\fB/usr/bin/cypasswd\fR [ \fB  -a -s -d account\fR ] 
.sp
\fB/usr/bin/cyexport\fR \fBfilepath\fR
.sp
\fB/usr/bin/cyimport\fR \fBfilepath\fR
.sp
\fB/usr/bin/cypython\fR [ \fB--section:option=value\fR\fI...\fR ] 
.sp
\fB/usr/bin/cydb\fR [ \fB--section:option=value\fR\fI...\fR ]  \fBdataset\fR \fBaction\fR
.SH "DESCRIPTION"
.PP
The cyphesis tools manage the data and configuration files used by cyphesis.
.PP
The \fBcyaddrules\fR tool uploads Atlas XML rules files into the
a running server. If rules already exist in the server, then the default
attributes are updated, and if the rule has a script associated with it,
then the script is reloaded from file. \fBcyaddrules\fR can
either upload the file given on the command line, or if none is specified it
will upload the rule file for the ruleset specified in the server config,
and any rule files it depends on. \fBcyaddrules\fR is typically
used to add additional rules during rule development without having to
restart the server. Rules can be loaded directly into a running server
using \fBcyaddrules\fR\&.
.PP
The \fBcyconfig\fR program provides an easy scriptable way to
make permanent changes to the server config from the command line.
It works by writing new config options to \fI\&.cyphesis.vconf\fR
in the users home directory, which is read by the server at startup,
and overrides the contents of the main config file. For a description of
the various options that the server takes, please see 
\fBcyphesis\fR(1)\&.
.PP
The \fBcyconvertrules\fR program converts Atlas XML rules files
from an older historic format into the format used by cyphesis since
version 0.3.1.
.PP
The \fBcydumprules\fR program dumps rules from the database table
used by the server into a set of Atlas XML rules files. Note that this does
not produce a set of files containing the same rules as those that were loaded
in using \fBcyloadrules\fR because some of the rules in the
rulesets that were not top level may have been overloaded, and do not exist
in the database table. Typically this command will be used to get an updated
copy of the top level ruleset from the server database, and the rest of the
files will be ignored.
.PP
The \fBcyloadrules\fR tool loads Atlas XML rules files into the
database table used by the server. The rules table is read by the
server at startup, so a server restart is typically required after loading
rules. \fBcyloadrules\fR can either load the file given on
the command line, or if none is specified it will load the rule file for
the ruleset specified in the server config, and any rule files it depends on.
Rules can be loaded directly into a running server using
\fBcyaddrules\fR\&.
.PP
The \fBcypasswd\fR tool is used to administrate the accounts table
in the server database.
.PP
The \fBcyexport\fR tool exports entities (and optionally rules) from 
a running server into a file. The file generated can be imported into a server
through the tool \fBcyimport\fR\&.
.PP
The \fBcyimport\fR tool imports entities and rules from a file, 
previously exported through the \fBcyexport\fR tool, into a
running server.
.PP
The \fBcypython\fR tool allows you to execute Python code in a 
running server. This command must be run on the same machine as the server 
(it uses domain sockets for communication with the server). When run the user
is presented with an interactive console into which Python code can be entered.
Commands are sent to the server by pressing enter.
.PP
The \fBcydb\fR tool is used to perform maintanence on the server
database. Use only when the server is offline.
The first argument specified which dataset to work with, and the second argument 
specifies the action for that data set.
The following datasets are supported:
.TP
\fBrules\fR
Purge and list rules.
.TP
\fBuser\fR
Purge, list, delete or modify user entries.
.TP
\fBuser\fR
Purge the world of all entities.
.PP
.SH "OPTIONS"
.PP
The \fBcypasswd\fR can either add a new account, set the password
of an existing account, or remove an account from the database. When no
arguments are given, it prompts for a new admin password for cyphesis.
When run with the \fB-a\fR option, the command prompts for a
password to be entered and an account with the username given by \fBaccount\fR,
and with the password supplied at the prompt is created. When run with the
\fB-s\fR option, the command prompts for a password, and the
existing account with username given by \fBaccount\fR has its password changed to
the new one entered. When run with the \fB-d\fR option, the
account with username given by \fBaccount\fR is removed from the database.
.PP
Whenever the \fBcypasswd\fR prompts for a password, a second
prompt is displayed asking for confirmation of the password. If the two
password entered do not match, the operation is aborted, and no changes are
made to the database.
.PP
The \fBcyexport\fR by default only exports entities, but can also 
export rules through the option \fB--export:rules=1\fR\&.
By default no transient entities are exported. This can be changed by the 
option \fB--export:transients=1\fR
.SH "AUTHOR"
.PP
Written by Alistair Riddoch and Erik Ogenvik.
.SH "REPORTING BUGS"
.PP
Report bugs to <general@worldforge.org>\&.
.SH "COPYRIGHT"
.PP
Copyright 2004 Alistair Riddoch.
Copyright 2013 Erik Ogenvik.
.SH "SEE ALSO"
.PP
\fBcyphesis\fR(1),
\fBcyclient\fR(1),
\fBcycmd\fR(1)
